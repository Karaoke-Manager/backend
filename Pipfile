[[source]]
name = "pypi"
url = "https://pypi.org/simple"
verify_ssl = true

[dev-packages]
pytest = "*"
pytest-asyncio = "*"
pytest-xdist = "*"
requests = "*"
typer = "*"
mypy = "*"
motor-stubs = {path = "./packages/motor-stubs",editable = true}
asgi-lifespan = "*"
httpx = "*"

[packages]
uvicorn = "*"
FastAPI = "*"
Pydantic = "*"
python-multipart = "*"
PyJWT = "*"
passlib = {extras = ["bcrypt"],version = "*"}
aioredis = "*"
motor = "*"
funcy = "*"
FastAPI-Helpers = {path = "./packages/fastapi-helpers",editable = true}
PyYAML = "*"
fs = "*"

[requires]
python_version = "3.7"

[scripts]
serve = "uvicorn karman:app --reload"
test = "pipenv run test:unit && pipenv run test:pep8"
"test:unit" = "pytest -n auto"
# TODO: Test pep8 tests
"test:pep8" = "pytest --pep8"
# TODO: Test coverage tests
"test:coverage" = "pytest --cov=karman"
"migrate:make" = "alembic revision --autogenerate"
"migrate:apply" = "alembic upgrade head"
clean = "rm -rf .mypy_cache .pytest_cache"
